# DIY NAS v1

## Table of contents <!-- omit in toc -->

1. [Hardware](#hardware)
1. [Software](#software)
1. [Operational issues](#operational-issues)
1. [Further readings](#further-readings)
1. [Sources](#sources)

## Hardware

| Component    | Choice                                                                  | Price                                                              |
| ------------ | ----------------------------------------------------------------------- | ------------------------------------------------------------------ |
| Case         | [Fractal Design Node 304]                                               | [€99][amazon  fractal design node 304]                             |
| CPU          | [Intel Celeron N5105]                                                   | Included in the motherboard                                        |
| Hard disks   | [Seagate IronWolf ST4000VN008 4TB]                                      | €556,00 (4x [€139,00][coolblue  seagate ironwolf st4000vn008 4tb]) |
| Motherboard  | Mini ITX NAS motherboard with Intel N5105 and I225                      | [€175,28][amazon  nas motherboard]                                 |
| Power supply | [Corsair RM850e] fully modular                                          | [€117,90][amazon  corsair rm850e 2023]                             |
| RAM          | [Crucial CT2K16G4SFRA32A] 32GB kit (2x16GB)                             | [€67,95][amazon  crucial ct2k16g4sfra32a]                          |
| SATA cables  | Cable Matters 6.0Gbps SATA III cable with 90 degrees angle, black, 45cm | €11,98 (2x [€5,99][amazon  cable matters sata cables])             |

## Software

[Proxmox] on bare metal, running [TrueNAS Core] as VM.

## Operational issues

One NIC is used by Proxmox as _management port_.<br/>
This one is given a fixed IP address and bridged from inside the system.

To allow for disk suspension and SMART checks from the VM, Proxmox needs to **directly** attach the disks to it:

```sh
$ lsblk -do 'NAME,SIZE,TYPE,MODEL,SERIAL' -I '8'
NAME  SIZE TYPE MODEL              SERIAL
sda   3.6T disk ST4000VN008-2DR166 ZGY9WA2F
sdb   3.6T disk ST4000VN008-2DR166 ZGY9WDD5
sdc   3.6T disk ST4000VN008-2DR166 ZGY9WL4Z
sdd   3.6T disk ST4000VN008-2DR166 ZGY9W66G

$ qm set 100 -sata0 /dev/disk/by-id/ata-ST4000VN008-2DR166_ZGY9WA2F
$ qm set 100 -sata1 /dev/disk/by-id/ata-ST4000VN008-2DR166_ZGY9WDD5
$ qm set 100 -sata2 /dev/disk/by-id/ata-ST4000VN008-2DR166_ZGY9WL4Z
$ qm set 100 -sata3 /dev/disk/by-id/ata-ST4000VN008-2DR166_ZGY9W66G
```

Wanting to aggregate 

## Further readings

- [TrueNAS core]

## Sources

All the references in the [further readings] section, plus the following:

- [The Perfect Home Server 2023]

<!--
  References
  -->

<!-- Upstream -->
[corsair rm850e]: https://www.corsair.com/ww/en/p/psu/cp-9020249-ww/rme-series-rm850e-fully-modular-low-noise-atx-power-supply-cp-9020249-ww
[crucial ct2k16g4sfra32a]: https://eu.crucial.com/memory/ddr4/ct2k16g4sfra32a
[fractal design node 304]: https://www.fractal-design.com/products/cases/node/node-304/black/
[intel celeron n5105]: https://www.intel.com/content/www/us/en/products/sku/212328/intel-celeron-processor-n5105-4m-cache-up-to-2-90-ghz/specifications.html
[seagate ironwolf st4000vn008 4tb]: https://www.seagate.com/products/nas-drives/ironwolf-hard-drive/
[the perfect home server 2023]: https://www.youtube.com/watch?v=vjDoQA4C22c
[truenas core]: https://www.truenas.com/truenas-core/

<!-- In-article sections -->
[further readings]: #further-readings

<!-- Knowledge base -->
[proxmox]: ../proxmox.md

<!-- Others -->
[amazon  cable matters sata cables]: https://www.amazon.nl/dp/B018Y2LEBE/
[amazon  corsair rm850e 2023]: https://www.amazon.nl/dp/B0BVL17341/
[amazon  crucial ct2k16g4sfra32a]: https://www.amazon.nl/dp/B08C4X9VR5/
[amazon  fractal design node 304]: https://www.amazon.nl/dp/B009PIEMUC/
[amazon  nas motherboard]: https://www.amazon.nl/dp/B0BYVNZDGS/
[coolblue  seagate ironwolf st4000vn008 4tb]: https://www.coolblue.nl/en/product/750006/seagate-ironwolf-st4000vn008-4tb.html
